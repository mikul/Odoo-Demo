<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		<!-- 2.a. The field should be placed after "partner_id" field. -->
		<record id="view_move_form_inherit" model="ir.ui.view">
			<field name="name">account.move.form.inherit</field>
			<field name="model">account.move</field>
			<field name="inherit_id" ref="account.view_move_form" />
			<field name="arch" type="xml">
				<field name="partner_id" position="after">
					<field name="metal_price"/>
					<field name="with_weight" invisible="1"/>
					<field name="total_weight" invisible="1"/>
				</field>

				<!-- 2.b Make account move line "total" field editable for products that has a UoM of type "weight" only. -->
				<xpath expr="//field[@name='invoice_line_ids']/tree/field[@name='price_total']" position="before">
					<field name="if_weight_uom" optional="hide"/>
				</xpath>
				<xpath expr="//field[@name='price_subtotal']" position="replace">
						<field name="price_subtotal" readonly="1" />
				</xpath>
				<xpath expr="//field[@name='price_total']" position="replace">
						<field name="price_total" string="Total" optional="show" attrs="{'readonly': [('if_weight_uom', '=', False)]}" />
				</xpath>
			</field>
		</record>
	</data>

</odoo>